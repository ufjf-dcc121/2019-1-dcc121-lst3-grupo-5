<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Torre de Hanoi</title>
</head>
<body>
    <ul id = "torre1"></ul>
    <ul id = "torre2"></ul>
    <ul id = "torre3"></ul>
    <script>

        var ulTorre1 = document.getElementById("torre1");
        var ulTorre2 = document.getElementById("torre2");
        var ulTorre3 = document.getElementById("torre3");
        var discoAtual;

        for (var index = 0; index < 5; index++) {
            var novoDisco = document.createElement("li");
            novoDisco.id = "disco" + (index+1);
            novoDisco.innerText = index+1;
            novoDisco.addEventListener("click",atribuirAtual)
            ulTorre1.appendChild(novoDisco);
        }
        for (var index = 0; index < 3; index++) {
            var torres = document.getElementById("torre" + (index + 1));
            torres.addEventListener("click",moverDisco);
        }

        ulTorre1.style.borderBottom = "10px solid black";
        ulTorre2.style.borderBottom = "10px solid black";
        ulTorre3.style.borderBottom = "10px solid black";

        ulTorre1.style.display = "inline-block";
        ulTorre2.style.display = "inline-block";
        ulTorre3.style.display = "inline-block";

        ulTorre1.style.width = "48px";
        ulTorre2.style.width = "48px";
        ulTorre3.style.width = "48px";

        ulTorre1.style.verticalAlign = "bottom";
        ulTorre2.style.verticalAlign = "bottom";
        ulTorre3.style.verticalAlign = "bottom";

        function atribuirAtual(e)
        {
            if(e.srcElement.parentElement.childNodes[0] == e.srcElement)
            {
                if(discoAtual!=null)
                {
                    discoAtual.style.color = "black";
                }
                discoAtual = e.srcElement;
                discoAtual.style.color = "blue";
            }
        }
        function moverDisco(e)
        {
            var lista = e.srcElement;
            if(discoAtual.parentElement != lista &&  lista.nodeName!="LI")
            {
                if(lista.childNodes[0]==null)
                {
                    lista.insertBefore(discoAtual, lista.childNodes[0]);
                }
                else if(lista.childNodes[0].innerText > discoAtual.innerText)
                {
                    lista.insertBefore(discoAtual, lista.childNodes[0]);
                }
            }
        }

    </script>
</body>
</html>